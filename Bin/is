#!/usr/bin/env ion

# @DEPENDANCIES
# Ion cuz its written in ion...
# Maim/Imagemagick/Curl for picture support
# 


fn print_help
	echo "help"
end

fn pb_read
	read date
	read digest
	read long
	read short
	read size
	read stat
	read url
	read uuid
	echo @split($url,' ')[1]
	#echo @split($size,' ')[1]
	#echo @split($digest,' ')[1]
end


# @main
#for arg in @args[1..]
#end
if test $len(@args) -ne 2
	echo "Not or too little enough arguments"
	exit 1
end

match @args[1]
	case "png"; maim -s | xclip -selection clipboard -f -t image/png > ~/Media/Pictures/Screenshots/screenshot.png
	case "curpng"; echo "$(maim -i $(xdotool getactivewindow) | curl -F c=\@- https://ptpb.pw | pb_read).jpg" | xclip -selection clipboard
	case "webpng"; echo "$(maim -s | curl -F c=\@- https://ptpb.pw | pb_read).jpg" | xclip -selection clipboard
	case "txt"; read txt; echo $txt | curl -F c=\@- https://ptpb.pw | pb_read | xclip -selection clipboard
	case _; echo "Unknown arg error"
end

